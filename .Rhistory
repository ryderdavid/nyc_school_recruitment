iris
library("tidyr")
install.packages("tidyverse")
iris
library("tidyr")
?gather
gather(iris)
gather(iris, Species)
iris %>% gather(key, Value, -Species)
iris %>% gather(key, Value, -Species) %>% head
iris %>% gather(key, Value, -Species) %>%
separate(key)
iris %>% gather(key, Value, -Species) %>%
separate(key, "test")
iris %>% gather(key, Value, -Species)
iris %>% gather(key, Value, -Species) %>%
separate(key, c("Part", "Measure"))
iris %>% gather(key, Value, -Species)
install_github("dkahle/ggmap")
# install.packages("devtools")
library(devtools)
nycmap <- get_map("NYC", source = "osm", api_key = "AIzaSyB9nDups5eEefFThtaUe9XQC1M1HEjHwQc")
register_google()
library(ggmap)
# install.packages("devtools")
library(devtools)
install_github("dkahle/ggmap")
register_google()
packageVersion("ggmap")
library(ggmap)
register_google()
register_google(key="AIzaSyB9nDups5eEefFThtaUe9XQC1M1HEjHwQc")
nycmap <- get_map("NYC", source = "osm")
has_goog_key()
nycmap <- get_map("NYC", source = "osm")
check.packages <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# need local package gdal, units (udunits on arch), v8-3.14 (source on AUR), gcc-fortran, unixodbc
packages <- c('sf', 'devtools', 'acs', 'tidycensus', 'tigris', 'sp',
'tmap', 'tmaptools', 'readxl', 'ggplot2', 'rgdal', 'spdplyr', 'RColorBrewer',
'viridis', 'viridisLite', 'rstudioapi', 'tidyverse')
check.packages(packages)
set_sourcefile_wd <- function() {
library(rstudioapi) #
current_path <- getActiveDocumentContext()$path
setwd(dirname(current_path ))
print( getwd() )
}
source("functions.R")
set_sourcefile_wd()
check.packages <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# need local package gdal, units (udunits on arch), v8-3.14 (source on AUR), gcc-fortran, unixodbc
packages <- c('sf', 'devtools', 'acs', 'tidycensus', 'tigris', 'sp',
'tmap', 'tmaptools', 'readxl', 'ggplot2', 'rgdal', 'spdplyr', 'RColorBrewer',
'viridis', 'viridisLite', 'rstudioapi', 'tidyverse')
check.packages(packages)
set_sourcefile_wd <- function() {
library(rstudioapi) #
current_path <- getActiveDocumentContext()$path
setwd(dirname(current_path ))
print( getwd() )
}
source("functions.R")
set_sourcefile_wd()
check.packages <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# need local package gdal, units (udunits on arch), v8-3.14 (source on AUR), gcc-fortran, unixodbc
packages <- c('sf', 'devtools', 'acs', 'tidycensus', 'tigris', 'sp',
'tmap', 'tmaptools', 'readxl', 'ggplot2', 'rgdal', 'spdplyr', 'RColorBrewer',
'viridis', 'viridisLite', 'rstudioapi', 'tidyverse')
check.packages(packages)
set_sourcefile_wd <- function() {
library(rstudioapi) #
current_path <- getActiveDocumentContext()$path
setwd(dirname(current_path ))
print( getwd() )
}
source("functions.R")
set_sourcefile_wd()
# Plot by year
plot_reg_by_year(2017, p = "Reds")
districts_demo_snapshot <- read_csv("https://data.cityofnewyork.us/resource/dndd-j759.csv")
schools_demo_snapshot <-
read_csv("https://data.cityofnewyork.us/api/views/s52a-8aq6/rows.csv?accessType=DOWNLOAD&bom=true&format=true")
schools_demo_snapshot %>% filter(year == "2017-18") %>%
filter_at(vars(grade_9, grade_10, grade_11, grade_12),
all_vars(. > 0))
schools_demo_snapshot %>% filter(year == "2017-18") %>%
filter_at(vars(grade_9, grade_10, grade_11, grade_12),
all_vars(. > 0))
schools_demo_snapshot <-
read_csv("https://data.cityofnewyork.us/api/views/s52a-8aq6/rows.csv?accessType=DOWNLOAD&bom=true&format=true") %>%
names() %<>%
str_to_lower() %>%
str_replace_all("\\s", "_") %>%
str_replace_all("#", "num") %>%
str_replace_all("%", "pct") %>%
str_replace_all("\\(|\\)", "") %>%
str_replace_all("\\&", "") %>%
str_replace_all("_{2,}", "_")
schools_demo_snapshot
schools_demo_snapshot <-
read_csv("https://data.cityofnewyork.us/api/views/s52a-8aq6/rows.csv?accessType=DOWNLOAD&bom=true&format=true")
names(schools_demo_snapshot) %<>%
str_to_lower() %>%
str_replace_all("\\s", "_") %>%
str_replace_all("#", "num") %>%
str_replace_all("%", "pct") %>%
str_replace_all("\\(|\\)", "") %>%
str_replace_all("\\&", "") %>%
str_replace_all("_{2,}", "_")
schools_demo_snapshot
schools_demo_snapshot %>% filter(year == "2017-18") %>%
filter_at(vars(grade_9, grade_10, grade_11, grade_12),
all_vars(. > 0))
schools_demo_snapshot %>% filter(year == "2017-18") %>%
filter_at(vars(grade_9, grade_10, grade_11, grade_12),
all_vars(. > 0)) %>%
dplyr::select(grade_9, grade_10, grade_11, grade_12)
schools_demo_snapshot %>% filter(year == "2017-18") %>%
filter_at(vars(grade_9, grade_10, grade_11, grade_12),
all_vars(. > 0))
schools_demo_snapshot %>% filter(year == "2017-18") %>%
filter_at(vars(grade_9, grade_10, grade_11, grade_12),
all_vars(. > 0)) %>%
dplyr::select(dbn, school_name)
schools_demo_snapshot %>% filter(year == "2017-18") %>%
filter_at(vars(grade_9, grade_10, grade_11, grade_12),
all_vars(. > 0)) %>%
dplyr::select(dbn, school_name, total_enrollment)
